## Configuration File
Example configuration files are provided in this directory. To build and run the given examples see the instructions [here](https://github.com/NOAA-OWP/LGAR-C/blob/master/INSTALL.md#build-standalone-mode).

A detailed description of the parameters for model configuration (i.e., initialize/setup) is provided below. 


| Variable | Datatype |  Limits  | Units | Role | Process | Description |
| -------- | -------- | ------ | ----- | ---- | ------- | ----------- |
| forcing_file | string | - | - | filename | - | provides precip. and PET inputs |
| soil_params_file | string | - | - | filename | - | provides soil types with van Genuchton parameters |
| layer_thickness | double (1D array)| - | cm | state variable | - | individual layer thickness (not absolute)|
| initial_psi | double (scalar)| >=0 | cm | capillary head | - | used to initialize layers with a constant head |
| ponded_depth_max | double (scalar)| >=0 | cm | maximum surface ponding | - | the maximum amount of water unavailable for surface drainage, default is set to zero |
| timestep | double (scalar)| >0 | sec/min/hr | temporal resolution | - | timestep of the model |
| forcing_resolution | double (scalar)| - | sec/min/hr | temporal resolution | - | timestep of the forcing data. Recommended value of 3600 seconds. |
| endtime | double (scalar)| >0 | sec, min, hr, d | simulation duration | - | time at which model simulation ends |
| layer_soil_type | int (1D array) | - | - | state variable | - | layer soil type (read from the database file soil_params_file) |
| max_valid_soil_types | int | >1 | - | - | - | maximum number of valid soil types read from the file soil_params_file (default is set to 15; model not valid for soil_type = waterbody, lava, glacier, etc.) |
| wilting_point_psi | double (scalar) | - | cm | state variable | - | wilting point (the amount of water not available for plants) used in computing AET. Suggested value is 15495.0 cm, corresponding to 15 atm. |
| field_capacity_psi | double (scalar) | - | cm | state variable | - | capillary head corresponding to volumetric water content at which gravity drainage becomes slower, used in computing AET. Suggested value is 340.9 cm for most soils, corresponding to 1/3 atm, and 103.3 cm for sands, corresponding to 1/10 atm. |
| use_closed_form_G | bool | true or false | - | - | - | determines whether the numeric integral or closed form for G is used; a value of true will use the closed form. This defaults to false. |
| giuh_ordinates | double (1D array)| - | - | state parameter | - | GIUH ordinates (for giuh based surface runoff) |
| verbosity | string | high, low, none | - | debugging | - | controls IO (screen outputs and writing to disk) |
| sft_coupled | Boolean | true, false | - | model coupling | impacts hydraulic conductivity | couples LASAM to SFT. Coupling to SFT reduces hydraulic conducitivity, and hence infiltration, when soil is frozen|
| soil_z | double (1D array) | - | cm | spatial resolution | - | vertical resolution of the soil column (computational domain of the SFT model) |
| calib_params | Boolean | true, false | - | calibratable params flag | impacts soil properties | If set to true, soil `smcmax`, `smcmin`, `vg_n`, `vg_alpha`, `hydraulic_conductivity`, `field_capacity_psi`, and `ponded_depth_max` are calibrated. defualt is false. vg = van Genuchten, SMC= soil moisture content |
| adaptive_timestep | Boolean | true, false | - | adaptive timestep flag | impacts timestep | If set to true, LGAR will use an internal adaptive timestep, and the above timestep is used as a minimum timestep (recommended value of 300 seconds). The adaptive timestep will never be larger than the forcing resolution. If set to false, LGAR will use the above specified timestep as a fixed timestep. Testing indicates that setting this value to true substantially decreases runtime while negligibly changing the simulation. We recommend this to be set to true. |
| root_zone_depth | double (scalar) | 0, sum of layer_thickness | cm | lower depth of roots in vadose zone | AET | This will be the region of soil, extending downward from the surface, from which AET will be extracted when the model is run in LGARTO mode (i.e. when TO_enabled is true). In LGAR mode, this parameter is not used and AET is simply extracted from the top most wetting front. If TO_enabled is true, then this must be specified, otherwise it does not have to be. |
| TO_enabled | Boolean | true, false | - | incorporate shallow groundwater flag | affects recharge and AET | If set to true, a muiltilayer version of the Talbot-Ogden recharge model will be used to simulate both positive and negative recharge, establishing the presence of a shallow water table. When this is set to true, we can say the model is running in LGARTO mode, otherwise we say it is running in LGAR mode. |
| free_drainage_enabled | Boolean | true, false | - | controls lower boundary condition when TO mode is off | affects recharge | Only relevant when the model is run in LGAR mode, that is when TO_enabled is set to false. In LGAR mode, if free_drainage_enabled is true, then free drainage will be enabled as the lower boundary condition, where fluxes from the vadose zone to groundwater are controlled by the hydraulic conductivity at the bottom of the model domain. In this case, the recharge to groundwater is assumed to never contribute to streamflow, and instead contributes to deep groundwater. If free_drainage_enabled is set to false, then the lower boundary condition will be no flow. If LGAR is used in an area with more PET than precipitation, the choice of no flow vs free drainage is not very impactful, because the vast majority of water that leaves the vadose zone will do so as AET. |
| mbal_tol | double (scalar) | >0 | cm | mass balance error resulting from a substep that will trigger a model crash | mass balance accounting | If the mass balance error is greater than this number in a single substep, then the model will abort. Global mass balance errors over the course of year long simulations (i.e. the sum of all mass balance errors over the course of a long simulation) tend to be small in LGAR mode, where a value greater than 1E-4 cm tends to be rare, occuring less than 1 in 10000 prameter sets. In LGARTO mode, global mass balance errors greater than 1E-4 cm seem to occur about 2 percent of the time and apparently errors with magnitudes greater than 1E-1 ocurr about once in 10000 parameter sets. LGAR and LGARTO in theory should both be mass conservative, however the presence of unlikely but possible edge cases can cause mass balance errors. While the model will usually converge with a small mbal_tol value, if general convergence is desired across a large number of parameter sets / forcing datasets, then we recommend that this value is not specified and therefore the default value of 1E1cm will be used. |
